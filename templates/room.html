<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>HotPot prototype! yeah!!</title>

<!-- Typekit JS -->
<script type="text/javascript" src="http://use.typekit.com/qje5yme.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

<!-- jQuery library -->
<script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>

<!-- OpenTok JS -->
<!--script src="http://staging.tokbox.com/v0.91/js/TB.min.js" type="text/javascript"></script-->
<!--script src="/static/js/opentok.js" type="text/javascript"></script-->

<!-- Socket IO -->
<script src="/static/js/socket.io.min.js" type="text/javascript"></script>

<!-- my scripts -->
<script src="/static/js/room.js" type="text/javascript"></script>

<link rel="stylesheet" href="/static/css/core.css" type="text/css" />

</head>
 
<body id="room">

<header id="cookingHeader">
	<h1>Hotpot</h1>
	Logged in as <span id="userId">{{ user_id }}</span>
</header>

<div id="container">
	
	<div id="recipeContainer">
	
		<nav id="recipeNav">
			<a href="" id="ingredientsButton">Ingredients</a>
	
			<ul id="stepTabs">
			{% for step in recipe.steps %}
				<li {% if loop.first %}class="currentStep"{% endif %}>
					<a href="" id="stepTab-{{ loop.index }}">{{ loop.index }}</a>
				</li>
			{% endfor %}
			</ul>
			
			<div id="stepsNav">
				<a href="#" id="startButton">Start</a>
				<a href="#" id="prevButton">Previous</a>
				<a href="#" id="nextButton">Next</a>
			</div>
		</nav><!-- #timeline -->
		
		<section id="recipe" data-id="{{ recipe._id }}">
		
			<h1 id="recipeTitle">{{ recipe.title }}</h1>	
		
			<section id="ingredients" style="display:none;">
				<a href="" class="closeButton">Close</a>
				<ul>
				{% for ingredient in recipe.ingredients %}
					<li>{{ ingredient.name }} {% if ingredient.amount is defined %}({{ ingredient.amount }}){% endif %}</li>
				{% endfor %}
				</ul>
			</section><!-- #ingredients -->
			
			
			<section id="steps">
				<ol>
					{% for step in recipe.steps %}
					<li id="step-{{ loop.index }}" class="step {{ step.type }}" {% if loop.first %}style="display:block;"{% endif %}>
						{{ step.text|safe }}
						
						{% if step.snippets is defined %}
							{% for snippet in step.snippets %}
							<section class="snippet {{ snippet.type }}" data-id="{{ snippet._id }}">
							
								<h1>{{ snippet.type|capitalize }}</h1>
								{{ snippet.text|safe }}
								
								{% if snippet.type == "foodnote" %}
									<form class="foodnoteForm">
										<textarea name="note" class="note"></textarea>
										<input type="submit" />
									</form>
									
									{% if snippet.notes is defined %}
										{% for note in snippet.notes %}
										<div class="usernote" data-id"' + data.noteId + '">
											{{ note.text }}
											<div class="postedBy">Posted by {{ note.name }}</div>
										</div>
										{% endfor %}
									{% endif %}
									
								{% endif %}
							</section>
							{% endfor %}
							
						{% endif %}
					</li>
					{% endfor %}				
				</ol>
			</section><!-- #steps -->
			
		</section><!-- #recipe -->
		
	</div><!-- #recipeContainer -->

	<div id="videoContainer">
		<a href="#" id="chatBoxButton">Toggle Chat Box</a>
		<div id="videos">
			<!-- OpenTok adds video elements here -->
		</div>
	</div>
	
	<div id="myInfo">
		<div id="myVideo">
			<!-- OpenTok adds video elements here -->
		</div>
	</div>
	
	<div id="chatBoxContainer">
		<div id="chatBox">
			<div id="chatMessages">
				<!-- CHAT MESSAGES APPEAR HERE -->
			</div><!-- #messages -->			
				
			<div id="chatInputContainer">
				<form id="chatInputForm">
					<input type="text" name="chatMessage" />
				</form>
			</div>
			
		</div><!-- #chatBox -->
		
	</div><!-- #chatContainer -->

</div><!-- #container -->
</body>
</html>